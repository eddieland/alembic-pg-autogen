schema: spec-driven

context: |
  Domain: Alembic plugin for PostgreSQL-specific autogeneration
  Tech stack: Python 3.11+, Alembic, SQLAlchemy, PostgreSQL
  Package manager: uv
  Build: hatchling with uv-dynamic-versioning (git-tag-based versions)
  Layout: src layout (src/alembic_pg_autogen/)
  Linting: ruff (120 char line width, rules E/F/UP/B/I), basedpyright, codespell
  Testing: pytest (discovers tests in both src/ and tests/)
  Commands: make install, make lint, make test, make build
  Early-stage project — currently placeholder, building foundational infrastructure

rules:
  proposal:
    - Keep proposals concise — under 500 words
    - Always include a "Non-goals" section to bound scope
    - Consider backwards compatibility with standard Alembic workflows
  specs:
    - Use Requirement / Scenario format with WHEN/THEN conditions
    - Reference existing Alembic and SQLAlchemy APIs and patterns
    - Specify which PostgreSQL-specific features are targeted
  design:
    - Reference existing Alembic extension points (MigrationContext, comparators, renderers)
    - Include a "Non-goals" section
    - Identify risks and trade-offs explicitly
  tasks:
    - Each task should be independently testable
    - Include which files to create or modify
    - Order tasks so earlier ones unblock later ones
